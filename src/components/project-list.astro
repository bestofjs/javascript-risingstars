---
import ProjectSummary from "./project-summary.astro";
import ProjectDetails from "./project-details.astro";

interface Props {
  projects: RisingStars.Project[];
  openFirstProject: boolean;
  language: string;
  year: number;
}

const { projects, openFirstProject, language, year } = Astro.props;
---

{
  projects.map((project, index) => {
    const widthPercent = ((project.delta / projects[0].delta) * 100).toFixed();
    const defaultIsOpen = openFirstProject && index === 0;
    return (
      <details open={defaultIsOpen}>
        <summary>
          <ProjectSummary
            project={project}
            index={index}
            widthPercent={widthPercent}
          />
        </summary>
        <ProjectDetails project={project} language={language} year={year} />
      </details>
    );
  })
}

<style>
  details > summary {
    list-style: none;
  }

  details[open] {
    background-color: white;
  }
</style>
