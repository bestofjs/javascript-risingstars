---
import Category from "~/components/category.astro";
import { fetchPageProps } from "~/fetch-page-props";

export const partial = true;
export const prerender = false;

const { year: yearParam, language, category: categorySlug } = Astro.params;
const year = parseInt(yearParam!, 0);

const { projectsByTag, categories } = await fetchPageProps(year, language!);

const projects = projectsByTag[categorySlug];
const category = categories.find((cat) => cat.key === categorySlug);
---

<Category
  projects={projects}
  year={year}
  language={language!}
  category={category!}
/>
